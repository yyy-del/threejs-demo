import{S as x,A as y,d as E,W as L,j as k,x as u,H as g,h as B,D as G,i as A,v as _,w,G as P}from"./three.module.00e15d00.js";import{O as W}from"./OrbitControls.7e68ed9b.js";import{d as j,q as R,W as D,o as I,f as q,_ as F}from"./index.1242bcf5.js";const H={id:"sprite"},O=j({__name:"Sprite",setup(z){let l,i,o,d,h;R(()=>{f()}),D(()=>{d.removeEventListener("change",s),window.cancelAnimationFrame(h),b()});function f(){const e=document.querySelector("#sprite");if(!e)return;const n=e.clientWidth,t=e.clientHeight;i=new x;const r=new y(16777215,.6);i.add(r),M(),S(),C(),l=new E(60,n/t,1,1e4),l.position.set(300,10,300),l.lookAt(i.position),i.add(l),o=new L({antialias:!0}),o.setSize(n,t),o.setPixelRatio(window.devicePixelRatio),o.setClearColor(12178431,1),e.appendChild(o.domElement),d=new W(l,o.domElement),d.addEventListener("change",s),s()}function M(){let e=new k(1e3,1e3);const n=location.origin+"/threejs-demo/img/grasslight-big.jpg";new u().load(n,t=>{t.wrapS=g,t.wrapT=g,t.repeat.set(10,10);const r=new B({color:7829248,map:t,side:G}),a=new A(e,r);a.rotateX(Math.PI/2),i.add(a),s()})}function S(){const e=location.origin+"/threejs-demo/img/tree-02.png";new u().load(e,n=>{for(let t=0;t<100;t++){let r=new _({map:n}),a=new w(r);i.add(a),a.scale.set(100,100,1);const m=Math.random()-.5,p=Math.random()-.5;a.position.set(1e3*m,45,1e3*p)}s()})}let c=new P;function C(){const e=location.origin+"/threejs-demo/img/sprite.png";new u().load(e,n=>{for(let t=0;t<400;t++){const r=new _({map:n}),a=new w(r);c.add(a),a.scale.set(8,10,1);let m=Math.random()-.5,p=Math.random()-.5,v=Math.abs(Math.random()-.5);a.position.set(1e3*m,400*v,1e3*p)}i.add(c),s()})}function s(){c&&c.children.length>0&&c.children.forEach(e=>{e.position.y-=1,e.position.y<=0&&(e.position.y=Math.random()*400)}),o.render(i,l),h=requestAnimationFrame(s)}function b(){var n;console.log("\u9500\u6BC1\u6A21\u578B");const e=document.getElementById("vertex-structure");try{if(e){i.clear(),o.dispose(),o.forceContextLoss();const t=o.domElement.getContext("webgl");t&&((n=t.getExtension("WEBGL_lose_context"))==null||n.loseContext()),e.innerHTML="",console.log("\u9500\u6BC1\u6210\u529F")}}catch(t){console.log(t),console.log("\u9500\u6BC1\u5931\u8D25")}}return(e,n)=>(I(),q("div",H))}});const $=F(O,[["__scopeId","data-v-b483264e"]]);export{$ as default};
