import{S as z,g as D,h as N,i as v,G as _,e as I,A as O,d as P,W as q,p as R,s as U,t as V,u as S,v as Y,w as $,n as J,m as G,o as K}from"./three.module.00e15d00.js";import{O as Q}from"./OrbitControls.7e68ed9b.js";import{d as X,q as Z,a2 as j,o as ee,f as te,_ as ne}from"./index.817c0e39.js";const oe={id:"hierarchy-tree"},ae=X({__name:"HierarchyAndTree",setup(re){let a,i,f,F,p,B,g,c,L;Z(()=>{c=document.getElementById("hierarchy-tree"),T()}),j(()=>{c==null||c.removeEventListener("change",x),W(),clearTimeout(L)});function T(){if(!c)return;const n=c.clientWidth,o=c.clientHeight;a=new z;let t=new D(20,20,20),r=new N({color:255});B=new v(t,r),g=new v(t,r),g.position.set(50,0,0),p=new _,p.position.set(50,0,0),p.add(B),p.add(g),a.add(p),console.log("\u672C\u5730\u5750\u6807",g.position),a.updateMatrixWorld(!0);let e=new I;g.getWorldPosition(e),console.log("\u4E16\u754C\u5750\u6807",e);let s=new O(4210752);a.add(s),f=new P(60,window.innerWidth/window.innerHeight,1,1e4),f.position.set(200,100,200),f.lookAt(a.position),i=new q({antialias:!0,alpha:!0}),i.setSize(n,o),i.setClearColor(12178431,1),c.appendChild(i.domElement),F=new Q(f,i.domElement),F.addEventListener("change",x);const l=new R(100);a.add(l),x()}function x(){i.render(a,f)}function b(n,o,t,r){let e=new J(n,25,25),s=new G({color:255}),l=new v(e,s);return l.position.set(o,t,r),l}function E(n,o,t,r,e){let s=new K(n,n,o,25,25),l=new G({color:255}),d=new v(s,l);return d.position.set(t,r,e),d}function W(){var o;console.log("\u9500\u6BC1\u6A21\u578B");const n=document.getElementById("vertex-structure");try{if(n){a.clear(),i.dispose(),i.forceContextLoss();const t=i.domElement.getContext("webgl");t&&((o=t.getExtension("WEBGL_lose_context"))==null||o.loseContext()),n.innerHTML="",console.log("\u9500\u6BC1\u6210\u529F")}}catch(t){console.log(t),console.log("\u9500\u6BC1\u5931\u8D25")}}function H(n,o,t){const e=document.createElement("canvas").getContext("2d");if(!e)return null;const s=`${o}px bold sans-serif`;e.font=s;const l=e.measureText(t).width,d=2*2,m=n+d,h=o+d;e.canvas.width=m,e.canvas.height=h,e.font=s,e.textBaseline="middle",e.textAlign="center",e.fillStyle="transparent",e.fillRect(0,0,m,h);const u=Math.min(1,n/l);return e.translate(m/2,h/2),e.scale(u,1),e.fillStyle="red",e.fillText(t,0,0),e.canvas}return L=setTimeout(()=>{p.remove(B,g);let n=b(10,0,0,0);n.name="\u8111\u58F3";let o=b(1,8,5,4);o.name="\u5DE6\u773C";let t=b(1,8,5,-4);t.name="\u53F3\u773C";let r=new _;r.name="\u5934\u90E8",r.add(n,o,t);let e=E(3,10,0,-15,0);e.name="\u8116\u5B50";let s=E(14,30,0,-35,0);s.name="\u8179\u90E8";let l=E(4,60,0,-80,-7);l.name="\u5DE6\u817F";let d=E(4,60,0,-80,7);d.name="\u53F3\u817F";let m=new _;m.name="\u817F",m.add(l,d);let h=new _;h.name="\u8EAB\u4F53",h.add(e,s,m);let u=new _;u.name="\u4EBA",u.add(r,h),u.translateY(50);const y=H(150,32,"\u673A\u5668\u4EBA");if(!y)return;const C=new U(y);C.minFilter=V,C.wrapS=S,C.wrapT=S;const k=new Y({map:C,transparent:!0}),A=1,M=new $(k);u.add(M),console.log(u.position.y),M.position.y=y.height*A,M.scale.x=y.width*A,M.scale.y=y.height*A,a.add(u),a.traverse(w=>{w.type,w.type==="Mesh"&&w.material.color.set(16776960),(w.name==="\u5DE6\u773C"||w.name==="\u53F3\u773C")&&w.material.color.set(0),a.getObjectById(4),a.getObjectByName("\u5DE6\u817F").material.color.set(16711680)}),x()},3e3),(n,o)=>(ee(),te("div",oe))}});const he=ne(ae,[["__scopeId","data-v-db615f52"]]);export{he as default};
