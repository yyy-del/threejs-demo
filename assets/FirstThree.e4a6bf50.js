import{S as v,g as E,h as w,i as m,j as G,D as A,k as D,A as F,O as k,C as P,W,l as H,m as I,n as O,o as q}from"./three.module.00e15d00.js";import{O as z}from"./OrbitControls.7e68ed9b.js";import{d as Y,q as j,a2 as R,o as U,f as X}from"./index.dd5f0a7f.js";const J={id:"firstThree"},Z=Y({__name:"FirstThree",setup(K){let t,i,u,_,o,d,r,p,C;j(()=>{x(),M()}),R(()=>{p.removeEventListener("change",c),L()});function x(){var T,B;const e=document.getElementById("firstThree");if(!e)return;let a=(T=e.clientWidth)!=null?T:0,n=(B=e.clientHeight)!=null?B:0;t=new v,u=new E(100,100,100),console.log(u),_=new w({color:255}),i=new m(u,_),i.castShadow=!0,i.receiveShadow=!0,t.add(i);let g=new G(6e3,6e3),f=new w({color:10066329,side:A}),s=new m(g,f);s.rotateX(Math.PI/2),s.position.y=-50,s.receiveShadow=!0,t.add(s),r=new D(16777215,1),r.position.set(0,220,0),r.castShadow=!0,r.shadow.camera.near=.5,r.shadow.camera.far=500,r.shadow.mapSize.set(1024,1024),t.add(r);let y=new F(4473924);t.add(y);let h=window.innerWidth/window.innerHeight,l=200;d=new k(-l*h,l*h,l,-l,.1,1e3),d.position.set(200,300,200),d.lookAt(t.position);let b=new P(r.shadow.camera);t.add(b),o=new W,o.setSize(a,n),o.setClearColor(12178431,1),o.shadowMap.enabled=!0,o.shadowMap.type=H,e.appendChild(o.domElement),c(),p=new z(d,o.domElement),p.addEventListener("change",c)}let S=new Date().getTime();function M(){let e=new Date().getTime(),a=e-S;S=e,C=requestAnimationFrame(M),c(),i.rotateY(.001*a)}function c(){o.render(t,d)}function L(){var a;console.log("\u9500\u6BC1\u6A21\u578B");const e=document.getElementById("firstThree");try{if(e){window.cancelAnimationFrame(C),t.clear(),o.dispose(),o.forceContextLoss();const n=o.domElement.getContext("webgl");n&&((a=n.getExtension("WEBGL_lose_context"))==null||a.loseContext()),e.innerHTML="",console.log("\u9500\u6BC1\u6210\u529F")}}catch(n){console.log(n),console.log("\u9500\u6BC1\u5931\u8D25")}}return setTimeout(()=>{let e=new E(100,100,100),a=new I({color:255,specular:4491502,shininess:12}),n=new m(e,a);n.position.set(-120,0,0),n.castShadow=!0,t.add(n);let g=new O(20,32,40),f=new w({color:16711935,opacity:.3,transparent:!0}),s=new m(g,f);s.translateY(120),s.castShadow=!0,t.add(s);let y=new q(50,50,100,25),h=new w({color:16711935}),l=new m(y,h);l.position.set(120,0,0),l.castShadow=!0,t.add(l)},3e3),(e,a)=>(U(),X("div",J))}});export{Z as default};
